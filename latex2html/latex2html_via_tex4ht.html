--- 
layout: content 
--- 
<!DOCTYPE html>
<html lang='ru'>
<head>
  <title>My notes on how to use Tex4ht+MathJax</title>
  <meta charset='utf-8'>
  <meta content='TeX4ht (https://tug.org/tex4ht/)' name='generator'>
  <meta content='width=device-width,initial-scale=1' name='viewport'>
  <style type='text/css'>
  <!--
  .ec-lmr-17{font-size:170%}
  .ec-lmr-12{font-size:120%}
  .ec-lmr-9{font-size:90%}
  p.noindent,p.nopar{text-indent:0}
  p.indent{text-indent:1.5em}
  p{margin-top:0;margin-bottom:0}
  p.noindent+p.noindent{margin-top:1em}
  a{overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;hyphens:auto}
  a img{border-top:0;border-left:0;border-right:0}
  img.math{vertical-align:middle}
  li p.indent{text-indent:0}
  li p:first-child{margin-top:0;margin-bottom:0}
  li div:last-child,li p:last-child,li p~ul:last-child{margin-bottom:.5em}
  ul.itemize1{padding-left:0}
  ul li.itemize{margin-left:1rem}
  .obeylines-h{white-space:nowrap}
  pre.verbatim{font-family:monospace,monospace;text-align:left;clear:both}
  code.verb{font-family:monospace,monospace}
  div.figure img{text-align:center}
  div.caption{text-indent:-2em;margin-left:3em;margin-right:1em;text-align:center;margin-top:.5rem}
  div.caption span.id{font-weight:700;white-space:nowrap}
  div.maketitle,h2.titleHead{text-align:center}
  div.maketitle{margin-bottom:2em}
  div.author,div.date{text-align:center}
  div.figure{margin-left:auto;margin-right:auto}
  figure.figure{text-align:center}
  figcaption.caption{text-indent:-2em;margin-left:3em;margin-right:1em;text-align:center}
  figcaption.caption span.id{font-weight:700;white-space:nowrap}
  img+figcaption,p+figcaption{margin-top:1em}
  .thebibliography dl{display:grid;grid-auto-columns:min-content 1fr;grid-auto-flow:column;grid-template-columns:2.5em 1fr}
  .thebibliography dt{grid-column:1;margin-bottom:.5em}
  body{margin:0;padding:0}
  .thebibliography p.indent{margin-top:1ex;margin-bottom:-1ex;text-indent:1.5em;font-size:smaller}
  .thebibliography dd{margin-top:0;margin-bottom:1em}
  .thebibliography p.noindent{margin-top:-2ex}
  .columns-3 p.indent{text-indent:0}
  -->
  </style>
  <meta content='latex2html_via_tex4ht-lua.tex' name='src'>
  <script>
  window.MathJax = { tex: { tags: "ams", }, }; 
  </script>
  <script async='async' id='MathJax-script' src='https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js' type='text/javascript'></script>
</head>
<body>
  <div class='maketitle'>
    <h2 class='titleHead'>My notes on how to use Tex4ht+MathJax</h2>
    <div class='author'>
      <span class='ec-lmr-12'>Victor Kozyakin</span>
    </div><br>
    <div class='date'>
      <span class='ec-lmr-12'>18&nbsp;августа 2025&nbsp;г.</span>
    </div>
  </div>
  <h3 class='sectionHead' id='call-command'><span class='titlemark'>1</span> <a id='x1-10001'></a>Call Command</h3><!-- l. 54 -->
  <p class='noindent'>My problem was to make a HTML ﬁle with plenty of mathematics from a LaTeX one. As a beginner, I immediately faced the following problems:</p>
  <ul class='itemize1'>
    <li class='itemize'>How to run Tex4ht to get HTML ﬁle with mathematics?</li>
    <li class='itemize'>What to do to make proper referencing of mathematical formulas?</li>
    <li class='itemize'>How to cope with TikZ ﬁgures?</li>
  </ul><!-- l. 62 -->
  <p class='indent'>After a while I discovered that the most suitable way for me is to join Tex4ht with MathJax. And the simplest way was to run the following command to process <span class='obeylines-h'><code class='verb'>test.tex</code></span> ﬁle:</p>
  <pre class='verbatim' id='verbatim-1'>
make4ht -s test.tex "myconfig" " -cunihtf -utf8"
</pre><!-- l. 69 -->
  <p class='nopar'>and after that, if one wants to embed into resulted <span class='obeylines-h'><code class='verb'>test.html</code></span> the css-ﬁle <span class='obeylines-h'><code class='verb'>test.css</code></span> generated during previous command, one should issue one the following command</p>
  <pre class='verbatim' id='verbatim-2'>
htlatex test.tex "myconfig" " -cunihtf -utf8"
</pre><!-- l. 75 -->
  <p class='nopar'><span class='ec-lmr-9'>or once more</span></p>
  <pre class='verbatim' id='verbatim-3'>
make4ht -s test.tex "myconfig" " -cunihtf -utf8"
</pre><!-- l. 79 -->
  <p class='nopar'>where the conﬁg ﬁle <span class='obeylines-h'><code class='verb'>myconfig.cfg</code></span> is as follows</p>
  <pre class='verbatim' id='verbatim-4'>
\Preamble{xhtml,0,mathjax,p-indent,fn-in,nostyle}

\Configure{MathjaxBlock}{\ifvmode\IgnorePar\fi\HCode{&lt;span class="mathjax-block"&gt;}}{\HCode{&lt;/span&gt;}}
\Configure{MathjaxEnv}{\ifvmode\IgnorePar\fi\HCode{&lt;span class="mathjax-env"&gt;}}{\HCode{&lt;/span&gt;}}

\textwidth=2160pt

\Css{body {margin:5\%; max-width:72em; font-size:large; padding:0 40px;}}
\Css{.thebibliography p.indent {margin-top:1ex; margin-bottom:-1ex; text-indent:1.5em;
    font-size:medium}}
\Css{.thebibliography dd {margin-top:0; margin-bottom:1em;}}
\Css{.thebibliography dl{grid-auto-columns:1ex 1fr}}
\Css{.thebibliography p.noindent{margin-top:-2ex}}
\Css{.columns-3 p.indent {text-indent:0}}

\def\eqref#1{$\mathrm{(\ref{#1})}$}

\begin{document}

\EndPreamble
</pre><!-- l. 105 -->
  <p class='nopar'></p>
  <h3 class='sectionHead' id='how-to-reference-equations-in-texhtmathjax'><span class='titlemark'>2</span> <a id='x1-20002'></a>How to reference equations in TeX4ht+MathJax</h3><!-- l. 108 -->
  <p class='noindent'>Unfortunately, it turned out that reference in conjunction TeX4ht+MathJax works well when they referenced sections, subsections and other structure element that are in <strong>text mode</strong>, but when you are trying to reference the label of equation you are getting ???.</p><!-- l. 116 -->
  <p class='indent'>The problem is turned out to be rather easily solvable: to reference labels of equations, align or other things in <strong>math mode</strong> you should put the calling <span class='obeylines-h'><code class='verb'>\eqref</code></span> or <span class='obeylines-h'><code class='verb'>\ref</code></span> in a <strong>math environment</strong>, e.g. by surrounding them by <span class='obeylines-h'><code class='verb'>$’s</code></span> or <span class='obeylines-h'><code class='verb'>\(</code></span>…<span class='obeylines-h'><code class='verb'>\)</code></span>. Another way is to redeﬁne the command <span class='obeylines-h'><code class='verb'>\eqref</code></span> in order that it will be invoked in math mode automatically (see the appropriate string in the conﬁg ﬁle <span class='obeylines-h'><code class='verb'>myconfig.cfg</code></span>.</p><!-- l. 129 -->
  <p class='indent'>So, for the LaTeX code below</p>
  <pre class='verbatim' id='verbatim-5'>
\begin{equation}
\boldsymbol{f}(x)=1\label{eq}
\end{equation}

\[
1\neq1. \tag{OneIsNotOne Condition}\label{E:mycond}
\]

Here, the reference to \tag{OneIsNotOne Condition} in previous
equation is as follows: \eqref{E:mycond}

\begin{align}
a&amp;=1\label{A}\\
b&amp;=0\label{B}
\end{align}
Example of references: we have equation \eqref{eq} from Sec. \ref{S1}. Or $\ref{A}$-\eqref{B}.
</pre><!-- l. 148 -->
  <p class='nopar'>we obtain the following output: <span class='mathjax-env'>\begin{equation} \boldsymbol {f}(x)=1\label {eq} \end{equation}</span><a id='x1-2001r1'></a><span class='mathjax-block'>\[ 1\neq 1. \tag {OneIsNotOne Condition}\label {E:mycond} \]</span></p><!-- l. 159 -->
  <p class='indent'>Here, the reference to <span class='obeylines-h'><code class='verb'>\tag{OneIsNotOne&nbsp;Condition}</code></span> in previous equation is as follows: <span class='mathjax-inline'>\(\mathrm {(\ref {E:mycond})}\)</span> <span class='mathjax-env'>\begin{align} a & =1\label {A} \\ b & =0\label {B} \end{align}</span><a id='x1-2002r2'></a></p><!-- l. 167 -->
  <p class='indent'>Example of references: we have equation <span class='mathjax-inline'>\(\mathrm {(\ref {eq})}\)</span> from Sec. <a href='#call-command'>1<!-- tex4ht:ref: S1  --></a>. Or <span class='mathjax-inline'>\(\ref {A}\)</span>-<span class='mathjax-inline'>\(\mathrm {(\ref {B})}\)</span>.</p>
  <h3 class='sectionHead' id='how-to-cope-with-tikz-figures'><span class='titlemark'>3</span> <a id='x1-30003'></a>How to cope with TikZ ﬁgures</h3><!-- l. 172 -->
  <p class='noindent'>Tex4th supports TikZ, however, for correct displaying text and math symbols in TikZ picture, it is needed to put in the preamble of tex ﬁle the following lines, before TikZ package loading:</p>
  <pre class='verbatim' id='verbatim-6'>
\ifdefined\HCode%
   \def\pgfsysdriver{pgfsys-dvisvgm4ht.def}%
\fi%
</pre><!-- l. 180 -->
  <p class='nopar'></p><!-- l. 182 -->
  <p class='indent'>Below is an example of using TikZ.</p>
  <figure class='figure' id='x1-30011'>
    <span id='example-of-stanford'></span> <!-- l. 187 -->
    <p class='noindent'><img alt='[Picture]' src='latex2html_via_tex4ht-lua0x.svg'></p>
    <figcaption class='caption'>
      <span class='id'>Рис.&nbsp;1:</span> <span class='content'>Example of Stanford</span>
    </figcaption><!-- tex4ht:label?: x1-30011  -->
  </figure><!-- l. 253 -->
  <p class='indent'>Citation example:&nbsp;<span class='cite'>[<a href='#XNDKKP_DSS96'>1</a>]</span>.</p>
  <h3 class='likesectionHead' id='список-литературы'><a id='x1-4000'></a>Список литературы</h3><!-- l. 18 -->
  <p class='noindent'></p>
  <section class='thebibliography' role='doc-bibliography'>
    <dl>
      <dt>[1]</dt>
      <dd>
        <a id='XNDKKP_DSS96'></a>Al-Nayef&nbsp;A., Diamond&nbsp;P., Kloeden&nbsp;P. et&nbsp;al. Bi-shadowing and delay equations&nbsp;// Dynam. Stability Systems. 1996. Vol.&nbsp;11, no.&nbsp;2. P.&nbsp;121–134.
      </dd>
    </dl>
  </section>
</body>
</html>


